@model IEnumerable<DemoAdminLTE.Models.User>
@using DemoAdminLTE.Resources.Views.UserViews

@{
    Layout = null;
}

@(Html
    .Grid(Model)
    .Build(columns =>
    {
        columns.Add(model => model.Id);
        columns.Add(model => model.Username);
        columns.Add(model => model.FullName).Sortable(false).Filterable(false);
        columns.Add(model => model.Phone);
        columns.Add(model => model.Email);
        columns.Add(model => model.Role.RoleName).Titled(Titles.Role);
        //columns.Add(model => model.IsLockedOut)
        //            .RenderedAs(model => model.IsLockedOut ? "<span class=\"ion ion-checkmark-round text-primary\"></span>" : "<span class=\"ion ion-close-round text-danger\"></span>")
        //            .Encoded(false);

        columns.Add(model => model.IsApproved)
                    .RenderedAs(model =>
                                    ( model.IsApproved ? "<span class=\"ion ion-checkmark-round text-primary\"></span>" : "<span class=\"ion ion-close-round text-danger\"></span>") +
                                    ( string.IsNullOrEmpty(model.Comment) ? "" : "<span title=\"" + model.Comment + "\" class=\"ion ion-ios-keypad pull-right\"></span>")
                               )
                    .Encoded(false);

        columns.Add(model => model.CreationDate).RenderedAs(model => model.CreationDate.ToUniversalTime().Humanize()).Sortable(true);

        columns.Add(model => model.Id == 1? "" : "<a href='" + Url.Action("Edit", "User", new { id = model.Id }) + "' class='label label-warning'><span class='glyphicon glyphicon-pencil'></span> " + Actions.Edit + "</a> " +
                                "<a href='" + Url.Action("Delete", "User", new { id = model.Id }) + "' class='label label-danger'><span class='glyphicon glyphicon-remove'></span> " + Actions.Delete + "</a>").Encoded(false).Sortable(false);
    })
    .Empty(Strings.NoData)
    .Filterable()
    .Sortable()
    .Pageable(pager =>
    {
        pager.PageSizes = new Dictionary<Int32, String> { { 0, Strings.All }, { 20, "20" }, { 50, "50" }, { 100, "100" }, { 500, "500" } };
        pager.ShowPageSizes = true;
        //pager.PagesToDisplay = 3;
        //pager.CurrentPage = 2;
        pager.RowsPerPage = 100;
    })
    .AppendCss("table-hover")
)
